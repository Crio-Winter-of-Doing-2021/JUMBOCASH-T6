(this["webpackJsonpcashflow-manager-ui"]=this["webpackJsonpcashflow-manager-ui"]||[]).push([[0],{119:function(e,t,a){e.exports=a.p+"static/media/login_banner.e0f421ab.svg"},126:function(e,t,a){e.exports=a.p+"static/media/upi.b6b34cb5.png"},127:function(e,t,a){e.exports=a.p+"static/media/cash.d3e786a7.png"},128:function(e,t,a){e.exports=a.p+"static/media/debit_card.69c6de74.png"},129:function(e,t,a){e.exports=a.p+"static/media/credit_card.08340871.png"},135:function(e,t,a){e.exports=a.p+"static/media/error_404.f36c3ba3.svg"},139:function(e,t,a){e.exports=a(225)},148:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},175:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},224:function(e,t,a){},225:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),c=a.n(l),i=a(36),o=a(9),s=a(11),u=a(18),d=a(117),m=a(118),p=a.n(m),E=a(21),b=a(119),f=a.n(b),h=a(68),y=a.n(h),g=a(77),v=a.n(g),O=a(29),T="https://jumbocash-dev.herokuapp.com/api",S=[{label:"Cash",value:"CASH"},{label:"Debit Card",value:"DEBIT_CARD"},{label:"Credit Card",value:"CREDIT_CARD"},{label:"UPI",value:"UPI"}],N={CASH:"Cash",DEBIT_CARD:"Debit Card",CREDIT_CARD:"Credit Card",UPI:"UPI"},I=[{label:"Paid",value:"PAID"},{label:"Not Paid",value:"NOT_PAID"}],A={PAID:"Paid",NOT_PAID:"Not Paid"},_=[{label:"Sales",value:"SALES"},{label:"Purchase",value:"PURCHASE"},{label:"Employee",value:"EMPLOYEE"},{label:"Tax",value:"TAX"},{label:"Asset Liquidation",value:"ASSET_LIQUIDATION"}],C={userId:"2e107775-2b0d-4e24-af6c-8766c042fb09",amount:0,time:Date.now(),paymentStatus:"",paymentMode:"",category:"",entityId:"",remarks:""},j={userId:"2e107775-2b0d-4e24-af6c-8766c042fb09",name:"",address:"",contact:""},D=(a(148),Object(u.d)(o.g,Object(s.b)((function(e){return{auth:e.auth}})))((function(e){return e.auth.isAuthenticated?r.a.createElement(o.a,{to:"/"}):r.a.createElement("div",{className:"p-d-flex p-jc-center p-ai-center bg-green-gradient h-100"},r.a.createElement(O.Card,null,r.a.createElement("div",{className:"p-grid"},r.a.createElement("div",{className:"p-col-12 p-md-6 p-lg-6 p-d-flex p-flex-column p-jc-center p-ai-center"},r.a.createElement("img",{src:v.a,onError:function(e){return e.target.src=y.a},alt:"flowex logo",width:"100"}),r.a.createElement("h1",null,"Hello"," ",r.a.createElement("span",{role:"img","aria-label":"Hello"},"\ud83d\udc4b")," ","Welcome to ",r.a.createElement("span",{className:"text-primary"},"Flowex"),"."),r.a.createElement("h2",null,"Please, login to continue"),r.a.createElement("a",{className:"p-button p-button-rounded p-mb-4 login-btn-google",href:"https://jumbocash-dev.herokuapp.com/api/auth/google"},r.a.createElement("i",{className:"pi pi-google p-mr-2"}),"Login with Google")),r.a.createElement("div",{className:"p-col-12 p-md-6 p-lg-6"},r.a.createElement("img",{src:f.a,onError:function(e){return e.target.src=y.a},alt:"login banner",width:"500"})))))}))),L=a(120),k=a(121),w=a(137),x=a(136),M=a(122),U=a(5),F=a.n(U),R=a(15),P=a(24),G=a.n(P);function H(){document.cookie.split(";").forEach((function(e){var t=e.indexOf("="),a=t>-1?e.substr(0,t):e;document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}))}var B=function(e){var t=e().auth.token,a={headers:{"Content-type":"application/json"}};return t&&(a.headers["x-auth-token"]=t),a},Y=a(23),V=Object(u.d)(o.g,Object(s.b)((function(e){return{auth:e.auth}}),{logOutUser:function(e){return function(){var t=Object(R.a)(F.a.mark((function t(a){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("logging out"),t.prev=1,H(),t.next=5,G.a.get(T+"/auth/logout");case 5:a({type:"LOGOUT_SUCCESS"}),e&&e.push("/login"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:"LOGOUT_FAIL"});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}}))((function(e){e.auth;var t=e.logOutUser,a=e.history,n=[{label:"Dashboard",template:function(e,t){return r.a.createElement(i.c,{exact:!0,className:"p-menuitem-link",activeClassName:"active-link",to:"/"},r.a.createElement("span",{className:"p-menuitem-icon pi pi-fw pi-chart-line"}),r.a.createElement("span",{className:"p-menuitem-text"},"Dashboard"))}}],l=r.a.createElement("img",{alt:"logo",src:v.a,onError:function(e){return e.target.src="https://www.primefaces.org/wp-content/uploads/2020/05/placeholder.png"},height:"40",className:"p-mr-2"}),c=r.a.createElement(Y.Button,{label:"Logout",icon:"pi pi-power-off",onClick:function(e){e.preventDefault(),t(a)}});return r.a.createElement("div",null,r.a.createElement("div",{className:"card"},r.a.createElement(M.Menubar,{model:n,start:l,end:c})))})),q=(a(170),function(){return r.a.createElement("div",{className:"footer p-d-flex p-jc-center p-ai-center"},r.a.createElement("span",null,"\xa9 Flowex 2021"))}),W=(a(171),function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null),r.a.createElement("div",{className:"container"},t),r.a.createElement(q,null))}),J=a(50),X=function(){return r.a.createElement("p",null,"Welcome guest! You are not authenticated to access this page. Please"," ",r.a.createElement(i.b,{className:"bold",to:"/login"},"Log in")," ","or"," ",r.a.createElement(i.b,{className:"bold",to:"/register"},"Register"," "),"to continue.")},$=function(){return r.a.createElement(J.Message,{severity:"warn",content:X,style:{display:"block"}})},z=a(34),Z=a(123),Q=a(51),K=(a(175),function(){return r.a.createElement(O.Card,{title:"Cashflow Summary",className:"cashflow-summary h-100"},r.a.createElement("p",{className:"p-mt-0",style:{color:"grey"}},"Total Transaction Amount - $10000"),r.a.createElement(Z.ProgressBar,{showValue:!1,color:"#95e597",value:"80"}),r.a.createElement(Q.Divider,null),r.a.createElement("div",{className:"p-grid p-text-bold p-my-3"},r.a.createElement("div",{className:"p-col"},r.a.createElement("div",{style:{color:"#95e597"}},"Total Inflow "),r.a.createElement("div",null,"$8000")),r.a.createElement(Q.Divider,{layout:"vertical"}),r.a.createElement("div",{className:"p-col"},r.a.createElement("div",{style:{color:"#f3c287"}},"Total Outflow"),r.a.createElement("div",null,"$2000"))))}),ee=a(79),te=function(){return r.a.createElement(O.Card,{title:"Top Vendors/Customers",className:"h-100"},r.a.createElement(ee.Chart,{type:"doughnut",data:{labels:["A","B","C","D","E"],datasets:[{data:[300,250,180,100,50],backgroundColor:["#28df99","#99f3bd","#82efc5","#d2f6c5","#e9f5e5"]}]},options:{legend:{position:"right"}}}))},ae=function(){return r.a.createElement(O.Card,{title:"Monthly Transactions Trend",className:"h-100"},r.a.createElement(ee.Chart,{type:"bar",data:{labels:["January","February","March","April","May","June","July"],datasets:[{type:"bar",label:"Debit",backgroundColor:"#f3c287",data:[21,84,24,75,37,65,34]},{type:"bar",label:"Credit",backgroundColor:"#95e597",data:[41,52,24,74,23,21,32]}]},options:{}}))},ne=function(){return function(){var e=Object(R.a)(F.a.mark((function e(t,a){var n,r,l,c,i;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_ENTITIES_LOADING"}),e.prev=1,n=B(a),e.next=5,G.a.get(T+"/entity",n);case 5:r=e.sent,t({type:"GET_ENTITIES_SUCCESS",payload:{entities:r.data.data}}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),i=null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.errorMessage,t({type:"GET_ENTITIES_FAIL",payload:{error:i}});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}()},re=a(80),le=a(33),ce=a(124),ie=a(125),oe=function(e){return r.a.createElement(ie.ProgressSpinner,{className:"p-d-flex p-jc-center p-ai-center loader-container"})},se=a(126),ue=a.n(se),de=a(127),me=a.n(de),pe=a(128),Ee=a.n(pe),be=a(129),fe=a.n(be),he=(a(210),{UPI:ue.a,CASH:me.a,DEBIT_CARD:Ee.a,CREDIT_CARD:fe.a}),ye=function(e){var t=e.paymentMode;return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{alt:t,src:he[t],onError:function(e){return e.target.src=y.a},className:"va-mid",width:30}),r.a.createElement("span",{className:"p-ml-2 va-mid"},N[t]))},ge=function(e){var t=e.paymentStatus;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"payment-status-badge status-".concat(t)},A[t]))},ve=Object(s.b)((function(e){return{transaction:e.transaction,entity:e.entity}}),{getTransactions:function(){return function(){var e=Object(R.a)(F.a.mark((function e(t,a){var n,r,l,c,i;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_TRANSACTIONS_LOADING"}),e.prev=1,n=B(a),e.next=5,G.a.get(T+"/transaction",n);case 5:r=e.sent,t({type:"GET_TRANSACTIONS_SUCCESS",payload:{transactions:r.data.data}}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),i=null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.errorMessage,t({type:"GET_TRANSACTIONS_FAIL",payload:{error:i}});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}()},getEntities:ne})((function(e){var t=e.transaction,a=e.entity,l=e.getTransactions,c=e.getEntities,i=e.editTransactionDialog,o=Object(n.useState)(null),s=Object(z.a)(o,2),u=s[0],d=s[1],m=Object(n.useState)(null),p=Object(z.a)(m,2),E=p[0],b=p[1],f=Object(n.useState)(null),h=Object(z.a)(f,2),y=h[0],g=h[1],v=Object(n.useRef)(null);Object(n.useEffect)((function(){t.transactions.length||t.isLoading||l(),a.entities.length||a.isLoading||c()}),[]);var T=r.a.createElement("div",{className:"p-card-title p-d-flex"},"List of Transactions",r.a.createElement(Y.Button,{type:"Button",icon:"pi pi-refresh",className:"p-ml-auto",tooltip:"Refresh",onClick:l})),N=function(e){var t=e.field,a=e.options,n="category"===t?[u,d]:"paymentStatus"===t?[E,b]:[y,g],l=Object(z.a)(n,2),c=l[0],i=l[1];return r.a.createElement(ce.MultiSelect,{value:c,options:a,onChange:function(e){v.current.filter(e.value,t,"in"),i(e.value)},optionLabel:"label",optionValue:"value",placeholder:"All",className:"p-column-filter"})};return r.a.createElement(O.Card,{title:T},t.error&&r.a.createElement(J.Message,{severity:"error",text:t.error,style:{display:"block"}}),a.error&&r.a.createElement(J.Message,{severity:"error",text:a.error,style:{display:"block"}}),!(t.error||a.error)&&(t.isLoading||a.isLoading)&&r.a.createElement(oe,null),!(t.error||a.error)&&!(t.isLoading||a.isLoading)&&r.a.createElement(re.DataTable,{ref:v,value:t.transactions,paginator:!0,rows:5,sortMode:"multiple",removableSort:!0,emptyMessage:"No transactions found."},r.a.createElement(le.Column,{field:"entityId",header:"Entity",body:function(e){var t=e.entityId,n=a.entitiesMap[t];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,n.name))},sortable:!0,filter:!0,filterMatchMode:"custom",filterFunction:function(e,t){return a.entitiesMap[e].name.toLowerCase().includes(t.toLowerCase())},filterPlaceholder:"Search by entity"}),r.a.createElement(le.Column,{field:"amount",header:"Amount",sortable:!0,filter:!0,filterMatchMode:"contains",filterPlaceholder:"Search by amount"}),r.a.createElement(le.Column,{field:"paymentStatus",header:"Payment Status",body:ge,sortable:!0,filter:!0,filterMatchMode:"contains",filterElement:r.a.createElement(N,{field:"paymentStatus",options:I})}),r.a.createElement(le.Column,{field:"paymentMode",header:"Payment Mode",body:ye,sortable:!0,filter:!0,filterMatchMode:"contains",filterElement:r.a.createElement(N,{field:"paymentMode",options:S})}),r.a.createElement(le.Column,{field:"category",header:"Category",sortable:!0,filter:!0,filterMatchMode:"contains",filterElement:r.a.createElement(N,{field:"category",options:_})}),r.a.createElement(le.Column,{body:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.Button,{icon:"pi pi-pencil",className:"p-button-outlined p-button-info",iconPos:"left",label:"Edit",onClick:function(){return i(e)}}))}})))})),Oe=(a(211),function(e){var t=e.className,a=e.styles,n=e.addEntityDialog,l=e.addTransactionDialog;return r.a.createElement("nav",{className:"fab-container p-d-flex  p-flex-column-reverse ".concat(t),style:a},r.a.createElement(Y.Button,{icon:"pi pi-plus",className:"fab-action-item p-button-raised p-button-rounded p-button-warning p-mt-2 p-ml-auto p-mr-auto",style:{height:"4rem",width:"4rem",fontSize:"2rem"}}),r.a.createElement(Y.Button,{className:"fab-item p-mt-2 bg-green-gradient text-white",label:"Add Transaction",onClick:function(){return l()}}),r.a.createElement(Y.Button,{className:"fab-item p-mt-2 bg-green-gradient text-white",label:"Add Entity",onClick:function(){return n()}}))}),Te=a(81),Se=a(82),Ne=a(130),Ie=a(131),Ae=a(72),_e=function(e){var t=e.isSubmitting;return r.a.createElement("div",null,r.a.createElement(Y.Button,{label:"Save",icon:"pi ".concat(t?"pi-spin pi-spinner":"pi-save"),type:"submit",disabled:t}))},Ce=a(90),je=a(25),De=je.c({amount:je.b().moreThan(0,"Amount cannot be 0"),time:je.a().required("Date/Time cannot be empty"),paymentStatus:je.d().oneOf(I.map((function(e){return e.value})),"Invalid Payment Type").required("Payment Status cannot be left unselected"),paymentMode:je.d().oneOf(S.map((function(e){return e.value})),"Invalid Payment Mode").required("Payment Mode cannot be left unselected"),category:je.d().oneOf(_.map((function(e){return e.value})),"Invalid Category").required("Category cannot be left unselected"),entityId:je.d().required("Entity cannot be left unselected"),remarks:je.d()}),Le=Object(s.b)((function(e){return{entity:e.entity,transaction:e.transaction}}),{addTransaction:function(e){return function(){var t=Object(R.a)(F.a.mark((function t(a,n){var r,l,c,i,o;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ADD_TRANSACTION_LOADING"}),t.prev=1,r=B(n),t.next=5,G.a.post(T+"/transaction",e,r);case 5:l=t.sent,E.b.success("\u2705 Transaction Added Successfully"),a({type:"ADD_TRANSACTION_SUCCESS",payload:{transaction:l.data.transaction}}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),o=null===t.t0||void 0===t.t0||null===(c=t.t0.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.errorMessage,E.b.error("\u274c Failed to add transaction. "+o),a({type:"ADD_TRANSACTION_FAIL",payload:{error:o}});case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,a){return t.apply(this,arguments)}}()},editTransaction:function(e,t){return function(){var a=Object(R.a)(F.a.mark((function a(n,r){var l,c,i,o,s;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"EDIT_TRANSACTION_LOADING",payload:{id:e}}),a.prev=1,l=B(r),a.next=5,G.a.patch(T+"/transaction/"+e,t,l);case 5:c=a.sent,E.b.success("\u2705 Transaction Edited Successfully"),n({type:"EDIT_TRANSACTION_SUCCESS",payload:{transaction:c.data.data}}),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(1),s=null===a.t0||void 0===a.t0||null===(i=a.t0.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.errorMessage,E.b.error("\u274c Failed to edit transaction. "+s),n({type:"EDIT_TRANSACTION_FAIL",payload:{error:s}});case 15:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e,t){return a.apply(this,arguments)}}()},getEntities:ne})((function(e){var t=e.entity.entities,a=e.getEntities,l=e.addTransaction,c=e.editTransaction,i=e.transaction.isUpdating,o=e.visible,s=e.onHide,u=e.initialValues,d=e.isEdit;Object(n.useEffect)((function(){a()}),[]),u.time=new Date(u.time);var m=Object(Ce.a)({initialValues:u,validationSchema:De,onSubmit:function(){var e=Object(R.a)(F.a.mark((function e(t,a){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setSubmitting,n=a.resetForm,e.next=3,d?c(u.id,t):l(t);case 3:n(),s(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),enableReinitialize:!0});return r.a.createElement("form",{onSubmit:m.handleSubmit},r.a.createElement(Te.Dialog,{header:"".concat(d?"Edit Transaction":"Add New Transaction"),visible:o,style:{width:"50vw"},footer:r.a.createElement(_e,{isSubmitting:i}),onHide:function(){s(!1)},dismissableMask:!0},r.a.createElement("div",{className:"p-fluid p-formgrid p-grid"},r.a.createElement("div",{className:"p-field p-col-12 p-md-6 p-mb-4"},r.a.createElement("label",{htmlFor:"amount"},"Amount"),r.a.createElement(Ne.InputNumber,Object.assign({id:"amount",mode:"currency",currency:"INR",placeholder:"Enter the transaction amount"},m.getFieldProps("amount"),{onChange:function(e){e.value&&m.setFieldValue("amount",e.value)}})),m.touched.amount&&m.errors.amount?r.a.createElement("small",{id:"amount-help",className:"p-error p-d-block"},m.errors.amount):null),r.a.createElement("div",{className:"p-field p-col-12 p-md-6 p-mb-4"},r.a.createElement("label",{htmlFor:"time"},"Date/Time"),r.a.createElement(Ie.Calendar,Object.assign({inputId:"time",showTime:!0,hourFormat:"24",hideOnDateTimeSelect:!0,placeholder:"Select date/time of transaction",showIcon:!0,baseZIndex:1,appendTo:document.body},m.getFieldProps("time"))),m.touched.time&&m.errors.time?r.a.createElement("small",{id:"time-help",className:"p-error p-d-block"},m.errors.time):null),r.a.createElement("div",{className:"p-field p-col-12 p-md-6 p-mb-4"},r.a.createElement("label",{htmlFor:"paymentStatus"},"Select Transaction Status"),r.a.createElement(Ae.Dropdown,Object.assign({filter:!0,inputId:"paymentStatus",options:I,placeholder:"Select status for the transaction"},m.getFieldProps("paymentStatus"))),m.touched.paymentStatus&&m.errors.paymentStatus?r.a.createElement("small",{id:"paymentStatus-help",className:"p-error p-d-block"},m.errors.paymentStatus):null),r.a.createElement("div",{className:"p-field p-col-12 p-md-6 p-mb-4"},r.a.createElement("label",{htmlFor:"paymentMode"},"Select Transaction Mode"),r.a.createElement(Ae.Dropdown,Object.assign({filter:!0,inputId:"paymentMode",options:S,placeholder:"Select mode of the transaction"},m.getFieldProps("paymentMode"))),m.touched.paymentMode&&m.errors.paymentMode?r.a.createElement("small",{id:"paymentMode-help",className:"p-error p-d-block"},m.errors.paymentMode):null),r.a.createElement("div",{className:"p-field p-col-12 p-md-6 p-mb-4"},r.a.createElement("label",{htmlFor:"category"},"Select Category"),r.a.createElement(Ae.Dropdown,Object.assign({filter:!0,inputId:"category",options:_,placeholder:"Select a category for transaction"},m.getFieldProps("category"))),m.touched.category&&m.errors.category?r.a.createElement("small",{id:"category-help",className:"p-error p-d-block"},m.errors.category):null),r.a.createElement("div",{className:"p-field p-col-12 p-md-6 p-mb-4"},r.a.createElement("label",{htmlFor:"entityId"},"Select Entity"),r.a.createElement(Ae.Dropdown,Object.assign({filter:!0,inputId:"entityId",options:t,optionLabel:"name",optionValue:"id",itemTemplate:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"p-text-bold"},e.name),r.a.createElement("div",{className:"p-text-light"},e.address," | ",e.contact))},filterBy:"name,address",placeholder:"Select an entity",baseZIndex:1,appendTo:document.body},m.getFieldProps("entityId"))),m.touched.entityId&&m.errors.entityId?r.a.createElement("small",{id:"entityId-help",className:"p-error p-d-block"},m.errors.entityId):null),r.a.createElement("div",{className:"p-field p-col-12"},r.a.createElement("label",{htmlFor:"remarks"},"Remarks(optional)"),r.a.createElement(Se.InputTextarea,Object.assign({id:"remarks",type:"text",rows:"3"},m.getFieldProps("remarks"))),m.touched.remarks&&m.errors.remarks?r.a.createElement("small",{id:"remarks-help",className:"p-error p-d-block"},m.errors.remarks):null)),r.a.createElement(Q.Divider,null)))})),ke=a(101),we=je.c({name:je.d().max(200,"Name cannot be longer than 200 characters").required("Name cannot be left empty").matches(/^[^0-9]+.*/,"Name should not begin with a number"),address:je.d().required("Address cannot be left empty"),contact:je.d().required("Contact cannot be left empty").matches(/^[0-9]+$/,"Invalid contact number")}),xe=Object(s.b)((function(e){return{entity:e.entity}}),{addEntity:function(e){return function(){var t=Object(R.a)(F.a.mark((function t(a,n){var r,l,c,i,o;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ADD_ENTITY_LOADING"}),t.prev=1,l=B(n),t.next=5,G.a.post(T+"/entity",e,l);case 5:r=t.sent,E.b.success("\u2705 Entity Added Successfully"),a({type:"ADD_ENTITY_SUCCESS",payload:{entity:r.data.entity}}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),o=null===t.t0||void 0===t.t0||null===(c=t.t0.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.errorMessage,E.b.error("\u274c Failed to add entity. "+o),a({type:"ADD_ENTITY_FAIL",payload:{error:o}});case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,a){return t.apply(this,arguments)}}()},editEntity:function(e,t){return function(){var a=Object(R.a)(F.a.mark((function a(n,r){var l,c,i,o,s;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"EDIT_ENTITY_LOADING",payload:{id:e}}),a.prev=1,l=B(r),a.next=5,G.a.patch(T+"/entity/"+e,t,l);case 5:c=a.sent,E.b.success("\u2705 Entity Edited Successfully"),n({type:"EDIT_ENTITY_SUCCESS",payload:{entity:c.data.data}}),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(1),s=null===a.t0||void 0===a.t0||null===(i=a.t0.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.errorMessage,E.b.error("\u274c Failed to edit entity. "+s),n({type:"EDIT_ENTITY_FAIL",payload:{error:s}});case 15:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e,t){return a.apply(this,arguments)}}()}})((function(e){var t=e.addEntity,a=e.editEntity,n=e.entity,l=n.isUpdating,c=(n.error,e.visible),i=e.onHide,o=e.initialValues,s=e.isEdit,u=Object(Ce.a)({initialValues:o,validationSchema:we,onSubmit:function(){var e=Object(R.a)(F.a.mark((function e(n,r){var l;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setSubmitting,l=r.resetForm,e.next=3,s?a(o.id,n):t(n);case 3:l(),i(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),enableReinitialize:!0});return r.a.createElement("form",{onSubmit:u.handleSubmit},r.a.createElement(Te.Dialog,{header:"".concat(s?"Edit Entity":"Add New Entity"),visible:c,style:{width:"50vw"},footer:r.a.createElement(_e,{isSubmitting:l}),onHide:function(){return i(!1)},dismissableMask:!0},r.a.createElement("div",{className:"p-fluid p-formgrid p-grid"},r.a.createElement("div",{className:"p-field p-col-12"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement(ke.InputText,Object.assign({id:"name",type:"text",placeholder:"Enter a name for the entity"},u.getFieldProps("name"))),u.touched.name&&u.errors.name?r.a.createElement("small",{id:"name-help",className:"p-error p-d-block"},u.errors.name):null),r.a.createElement("div",{className:"p-field p-col-12"},r.a.createElement("label",{htmlFor:"contact"},"Contact Number"),r.a.createElement(ke.InputText,Object.assign({id:"contact",type:"text",placeholder:"Enter entity's contact number"},u.getFieldProps("contact"))),u.touched.contact&&u.errors.contact?r.a.createElement("small",{id:"contact-help",className:"p-error p-d-block"},u.errors.contact):null),r.a.createElement("div",{className:"p-field p-col-12"},r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement(Se.InputTextarea,Object.assign({id:"address",type:"text",rows:"3",placeholder:"Enter entity's address"},u.getFieldProps("address"))),u.touched.address&&u.errors.address?r.a.createElement("small",{id:"address-help",className:"p-error p-d-block"},u.errors.address):null)),r.a.createElement(Q.Divider,null)))})),Me=a(102),Ue=function(e){var t=e.items.map((function(e){var t=e.header,a=e.content;return r.a.createElement(Me.TabPanel,{key:t,header:t},a)}));return r.a.createElement(Me.TabView,null,t)},Fe=Object(s.b)((function(e){return{entity:e.entity}}),{getEntities:ne})((function(e){var t=e.entity,a=t.isLoading,l=(t.isUpdating,t.entities),c=t.error,i=e.getEntities,o=e.editEntityDialog,s=Object(n.useRef)(null),u=r.a.createElement("div",{className:"p-card-title p-d-flex"},"List of Entities",r.a.createElement(Y.Button,{type:"Button",icon:"pi pi-refresh",className:"p-ml-auto",tooltip:"Refresh",onClick:i}));return r.a.createElement(O.Card,{title:u},c&&r.a.createElement(J.Message,{severity:"error",text:c,style:{display:"block"}}),!c&&a&&r.a.createElement(oe,null),!c&&!a&&r.a.createElement(re.DataTable,{ref:s,value:l,paginator:!0,rows:5,sortMode:"multiple",removableSort:!0,emptyMessage:"No entities found."},r.a.createElement(le.Column,{field:"name",header:"Name",sortable:!0,filter:!0,filterMatchMode:"contains",filterPlaceholder:"Search by name"}),r.a.createElement(le.Column,{field:"address",header:"Address",sortable:!0,filter:!0,filterMatchMode:"contains",filterPlaceholder:"Search by address"}),r.a.createElement(le.Column,{field:"contact",header:"Contact Number",sortable:!0,filter:!0,filterMatchMode:"contains",filterPlaceholder:"Search by contact"}),r.a.createElement(le.Column,{body:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.Button,{icon:"pi pi-pencil",className:"p-button-outlined p-button-info",iconPos:"left",label:"Edit",onClick:function(){return o(e)}}))}})))})),Re=function(){var e=Object(n.useState)(!1),t=Object(z.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),i=Object(z.a)(c,2),o=i[0],s=i[1],u=Object(n.useState)({}),d=Object(z.a)(u,2),m=d[0],p=d[1],E=Object(n.useState)(!1),b=Object(z.a)(E,2),f=b[0],h=b[1],y=Object(n.useState)({}),g=Object(z.a)(y,2),v=g[0],O=g[1],T=Object(n.useState)(!1),S=Object(z.a)(T,2),N=S[0],I=S[1],A=function(e){h(!!e),p(e||C),l(!0)},_=function(e){I(!!e),O(e||j),s(!0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"p-grid nested-grid p-mb-3"},r.a.createElement("div",{className:"p-col-12 p-md-12 p-lg-4"},r.a.createElement(K,null)),r.a.createElement("div",{className:"p-col-12 p-md-6 p-lg-4"},r.a.createElement(te,null)),r.a.createElement("div",{className:"p-col-12 p-md-6 p-lg-4"},r.a.createElement(ae,null))),r.a.createElement(Ue,{items:[{header:"Transactions",content:r.a.createElement(ve,{editTransactionDialog:A})},{header:"Entities",content:r.a.createElement(Fe,{editEntityDialog:_})}]}),r.a.createElement(Oe,{addTransactionDialog:A,addEntityDialog:_}),r.a.createElement(Le,{visible:a,onHide:l,initialValues:m,isEdit:f}),r.a.createElement(xe,{visible:o,onHide:s,initialValues:v,isEdit:N}))},Pe=Object(u.d)((function(e){var t=function(t){Object(w.a)(n,t);var a=Object(x.a)(n);function n(){return Object(L.a)(this,n),a.apply(this,arguments)}return Object(k.a)(n,[{key:"componentDidMount",value:function(){this.shouldNavigateAway()}},{key:"componentDidUpdate",value:function(){this.shouldNavigateAway()}},{key:"shouldNavigateAway",value:function(){this.props.auth.isAuthenticated||this.props.history.push("/login")}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),n}(n.Component);return Object(s.b)((function(e){return{auth:e.auth}}))(t)}),Object(s.b)((function(e){return{auth:e.auth}})))((function(e){var t=e.auth;return r.a.createElement(W,null,r.a.createElement("div",{style:{marginTop:"1rem"}},t.isAuthenticated?r.a.createElement(r.a.Fragment,null,r.a.createElement(Re,null)):r.a.createElement($,null)))})),Ge=a(135),He=a.n(Ge),Be=function(){return r.a.createElement(W,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("img",{src:He.a,alt:"404_error",width:"500"}),r.a.createElement("p",null,"Go back to"," ",r.a.createElement(i.b,{className:"bold",to:"/"},"Home"))))},Ye=Object(u.d)(Object(s.b)((function(e){return{auth:e.auth}}),{logInUserWithOauth:function(e){return function(){var t=Object(R.a)(F.a.mark((function t(a,n){var r,l;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"LOGIN_WITH_OAUTH_LOADING"}),t.prev=1,r={"Content-Type":"application/json","x-auth-token":e},t.next=5,G.a.get(T+"/user/me",{headers:r});case 5:l=t.sent,console.log(l.data,e),a({type:"LOGIN_WITH_OAUTH_SUCCESS",payload:{user:l.data.data,token:e}}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),a({type:"LOGIN_WITH_OAUTH_FAIL",payload:{error:t.t0.response.data.message}});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,a){return t.apply(this,arguments)}}()},loadUser:function(){return function(){var e=Object(R.a)(F.a.mark((function e(t,a){var n,r,l,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"USER_LOADING"}),e.prev=1,n=B(a),console.log("Loading user",n),e.next=6,G.a.get(T+"/user/me",n);case 6:r=e.sent,console.log(r.data),t({type:"USER_SUCCESS",payload:{user:r.data.data}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t({type:"USER_FAIL",payload:{error:null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.message}});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}()}}))((function(e){var t=e.logInUserWithOauth,a=e.auth,l=e.loadUser;return Object(n.useEffect)((function(){l()}),[l]),Object(n.useEffect)((function(){"#_=_"===window.location.hash&&(window.location.hash="");var e=p.a.get("x-auth-cookie");console.log(e),e&&t(e)}),[]),Object(n.useEffect)((function(){a.appLoaded||a.isLoading||!a.token||a.isAuthenticated||l()}),[a.isAuthenticated,a.token,l,a.isLoading,a.appLoaded]),r.a.createElement(r.a.Fragment,null,a.appLoaded?r.a.createElement(r.a.Fragment,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/login",component:D}),r.a.createElement(o.b,{path:"/report",component:Pe}),r.a.createElement(o.b,{exact:!0,path:"/",component:Pe}),r.a.createElement(o.b,{component:Be})),r.a.createElement(E.a,{hideProgressBar:!0,pauseOnFocusLoss:!1})):r.a.createElement(oe,null))})),Ve=(a(219),a(220),a(221),a(222),a(223),a(224),a(3)),qe={token:localStorage.getItem("token"),isAuthenticated:!1,isLoading:!1,user:null,error:null,appLoaded:!1},We=a(71),Je=a(91),Xe={entities:[],entitiesMap:{},isLoading:!1,isUpdating:!1,error:null},$e={transactions:[],isLoading:!1,isUpdating:!1,error:null},ze=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER_LOADING":return Object(Ve.a)(Object(Ve.a)({},e),{},{isLoading:!0,appLoaded:!1,error:null});case"LOGIN_WITH_OAUTH_LOADING":return Object(Ve.a)(Object(Ve.a)({},e),{},{isLoading:!0,error:null});case"LOGIN_WITH_OAUTH_SUCCESS":return localStorage.setItem("token",n.token),Object(Ve.a)(Object(Ve.a)({},e),{},{isAuthenticated:!0,isLoading:!1,token:n.token,user:n.user,error:null});case"USER_SUCCESS":return Object(Ve.a)(Object(Ve.a)({},e),{},{isAuthenticated:!0,isLoading:!1,user:n.user,error:null,appLoaded:!0});case"USER_FAIL":return localStorage.removeItem("token"),Object(Ve.a)(Object(Ve.a)({},e),{},{isAuthenticated:!1,isLoading:!1,user:null,error:null,appLoaded:!0});case"LOGOUT_SUCCESS":return localStorage.removeItem("token"),Object(Ve.a)(Object(Ve.a)({},e),{},{token:null,user:null,isAuthenticated:!1,isLoading:!1,error:null});default:return e}},entity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_ENTITIES_LOADING":return Object(Ve.a)(Object(Ve.a)({},e),{},{isLoading:!0});case"EDIT_ENTITY_LOADING":case"DELETE_ENTITY_LOADING":case"ADD_ENTITY_LOADING":return Object(Ve.a)(Object(Ve.a)({},e),{},{isUpdating:!0});case"GET_ENTITIES_SUCCESS":return Object(Ve.a)(Object(Ve.a)({},e),{},{isLoading:!1,entities:n.entities,entitiesMap:n.entities.reduce((function(e,t){return e[t.id]=t,e}),{})});case"ADD_ENTITY_SUCCESS":return Object(Ve.a)(Object(Ve.a)({},e),{},{isUpdating:!1,entities:[n.entity].concat(Object(Je.a)(e.entities)),entitiesMap:Object(Ve.a)(Object(We.a)({},n.entity.id,n.entity),e.entitiesMap)});case"DELETE_ENTITY_SUCCESS":return Object(Ve.a)(Object(Ve.a)({},e),{},{isUpdating:!1,entities:e.entities.filter((function(e){return e.id!==n.entity.id}))});case"EDIT_ENTITY_SUCCESS":return Object(Ve.a)(Object(Ve.a)({},e),{},{isUpdating:!1,entities:e.entities.map((function(e){return e.id===n.entity.id?n.entity:e})),entitiesMap:Object(Ve.a)(Object(We.a)({},n.entity.id,n.entity),e.entitiesMap)});case"DELETE_ENTITY_FAIL":case"EDIT_ENTITY_FAIL":case"ADD_ENTITY_FAIL":return Object(Ve.a)(Object(Ve.a)({},e),{},{isUpdating:!1});case"GET_ENTITIES_FAIL":return Object(Ve.a)(Object(Ve.a)({},e),{},{isLoading:!1});default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_TRANSACTIONS_LOADING":return Object(Ve.a)(Object(Ve.a)({},e),{},{isLoading:!0});case"EDIT_TRANSACTION_LOADING":case"DELETE_TRANSACTION_LOADING":case"ADD_TRANSACTION_LOADING":return Object(Ve.a)(Object(Ve.a)({},e),{},{isUpdating:!0});case"GET_TRANSACTIONS_SUCCESS":return Object(Ve.a)(Object(Ve.a)({},e),{},{isLoading:!1,transactions:n.transactions});case"ADD_TRANSACTION_SUCCESS":return Object(Ve.a)(Object(Ve.a)({},e),{},{isUpdating:!1,transactions:[n.transaction].concat(Object(Je.a)(e.transactions))});case"DELETE_TRANSACTION_SUCCESS":return Object(Ve.a)(Object(Ve.a)({},e),{},{isUpdating:!1,transactions:e.transactions.filter((function(e){return e.id!==n.transaction.id}))});case"EDIT_TRANSACTION_SUCCESS":return Object(Ve.a)(Object(Ve.a)({},e),{},{isUpdating:!1,transactions:e.transactions.map((function(e){return e.id===n.transaction.id?n.transaction:e}))});case"DELETE_TRANSACTION_FAIL":case"EDIT_TRANSACTION_FAIL":case"ADD_TRANSACTION_FAIL":return Object(Ve.a)(Object(Ve.a)({},e),{},{isUpdating:!1});case"GET_TRANSACTIONS_FAIL":return Object(Ve.a)(Object(Ve.a)({},e),{},{isLoading:!1});default:return e}}}),Ze=Object(u.e)(ze,{},Object(u.d)(Object(u.a)(d.a),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__()||u.d));c.a.render(r.a.createElement(s.a,{store:Ze},r.a.createElement(i.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",component:Ye})))),document.getElementById("root"))},68:function(e,t,a){e.exports=a.p+"static/media/placeholder.a24fb888.png"},77:function(e,t,a){e.exports=a.p+"static/media/logo.b358106f.png"}},[[139,1,2]]]);
//# sourceMappingURL=main.6aa62a65.chunk.js.map